AS=TASM
ASFLAGS=/m2

LINK=TLINK
LINKFLAGS=

TARGET=GWBASIC.EXE

LINKER_SCRIPT=GWBASIC.LNK

TOUCH=TOUCH

TRESP_BODY=TRESP
TRESP=TOOLS\$(TRESP_BODY).COM
TRESP_SRC=TOOLS\$(TRESP_BODY).ASM
TRESP_OBJ=TOOLS\$(TRESP_BODY).OBJ
TRESP_LST=TOOLS\$(TRESP_BODY).LST
TRESP_MAP=TOOLS\$(TRESP_BODY).MAP

OBJS0=\
	ADVGRP.OBJ \
	BIBOOT.OBJ \
	BIMISC.OBJ \
	BIPRTU.OBJ \
	BIPTRG.OBJ \
	BISTRS.OBJ \
	CALL86.OBJ \
	DSKCOM.OBJ

OBJS1=\
	FIVEO.OBJ \
	GENGRP.OBJ \
	GIO86.OBJ \
	GIOCAS.OBJ \
	GIOCOM.OBJ \
	GIOCON.OBJ \
	GIODSK.OBJ \
	GIOKYB.OBJ \
	GIOLPT.OBJ

OBJS2=\
	GIOSCN.OBJ \
	GIOTBL.OBJ \
	GWDATA.OBJ \
	GWEVAL.OBJ \
	GWINIT.OBJ \
	GWLIST.OBJ \
	GWMAIN.OBJ \
	GWRAM.OBJ \
	GWSTS.OBJ

OBJS3=\
	IBMRES.OBJ \
	ITSA86.OBJ \
	KANJ86.OBJ \
	MACLNG.OBJ \
	MATH1.OBJ \
	MATH2.OBJ \
	NEXT86.OBJ \
	SCNDRV.OBJ \
	SCNEDT.OBJ

OBJS_SUPPLEMENTAL=
OBJS=$(OBJS0) $(OBJS1) $(OBJS2) $(OBJS3) $(OBJS_SUPPLEMENTAL)

INCS_SUPPLEMENTAL=
INCS=BINTRP.H IBMRES.H OEM.H GIO86U MSDOSU $(INCS_SUPPLEMENTAL)

ALL : $(TARGET)
	ECHO DONE > ALL

$(TARGET) : $(OBJS) $(LINKER_SCRIPT)
	$(LINK) $(LINKFLAGS) @$(LINKER_SCRIPT)

$(LINKER_SCRIPT) : $(OBJS) MAKEFILE $(TRESP)
	$(TRESP) /t +\r\n $(OBJS0) > RESP0.TMP
	$(TRESP) /t +\r\n $(OBJS1) > RESP1.TMP
	$(TRESP) /t +\r\n $(OBJS2) > RESP2.TMP
	$(TRESP) /t +\r\n $(OBJS3) > RESP3.TMP
	$(TRESP) /t +\r\n $(OBJS_SUPPLEMENTAL) > RESPS.TMP
	ECHO , $(TARGET) > RESPT.TMP
	TYPE RESP0.TMP RESP1.TMP RESP2.TMP RESP3.TMP RESPS.TMP RESPT.TMP > $(LINKER_SCRIPT)

$(TRESP): $(TRESP_SRC)
	$(AS) $(ASFLAGS) $(TRESP_SRC), $(TRESP_OBJ), $(TRESP_LST)
	$(LINK) /t $(TRESP_OBJ), $<, $(TRESP_MAP)

ADVGRP.OBJ : ADVGRP.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

BIBOOT.OBJ : BIBOOT.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

BIMISC.OBJ : BIMISC.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

BIPRTU.OBJ : BIPRTU.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

BIPTRG.OBJ : BIPTRG.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

BISTRS.OBJ : BISTRS.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

CALL86.OBJ : CALL86.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

DSKCOM.OBJ : DSKCOM.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

FIVEO.OBJ : FIVEO.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GENGRP.OBJ : GENGRP.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GIO86.OBJ : GIO86.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GIOCAS.OBJ : GIOCAS.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GIOCOM.OBJ : GIOCOM.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GIOCON.OBJ : GIOCON.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GIODSK.OBJ : GIODSK.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GIOKYB.OBJ : GIOKYB.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GIOLPT.OBJ : GIOLPT.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GIOSCN.OBJ : GIOSCN.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GIOTBL.OBJ : GIOTBL.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GWDATA.OBJ : GWDATA.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GWEVAL.OBJ : GWEVAL.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GWINIT.OBJ : GWINIT.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GWLIST.OBJ : GWLIST.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GWMAIN.OBJ : GWMAIN.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GWRAM.OBJ : GWRAM.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

GWSTS.OBJ : GWSTS.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

IBMRES.OBJ : IBMRES.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

ITSA86.OBJ : ITSA86.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

KANJ86.OBJ : KANJ86.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

MACLNG.OBJ : MACLNG.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

MATH1.OBJ : MATH1.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

MATH2.OBJ : MATH2.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

NEXT86.OBJ : NEXT86.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

SCNDRV.OBJ : SCNDRV.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

SCNEDT.OBJ : SCNEDT.ASM $(INCS)
	$(AS) $(ASFLAGS) $*.ASM,,

CLEAN:
	DEL *.OBJ
	DEL *.LST
	DEL *.MAP
	DEL *.EXE
	DEL ALL
	DEL RESP*.TMP
	DEL TOOLS\*.OBJ
	DEL TOOLS\*.LST
	DEL TOOLS\*.MAP
	DEL TOOLS\*.COM
